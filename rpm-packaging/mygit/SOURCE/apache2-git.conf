<VirtualHost *:80>

  ServerAdmin forgemaster@mycorp.org
  ServerName git.mycorp.org

  ErrorDocument 400 default
  ErrorDocument 401 default
  ErrorDocument 403 default
  ErrorDocument 404 default
  ErrorDocument 405 default
  ErrorDocument 408 default
  ErrorDocument 410 default
  ErrorDocument 411 default
  ErrorDocument 412 default
  ErrorDocument 413 default
  ErrorDocument 414 default
  ErrorDocument 415 default
  ErrorDocument 500 default
  ErrorDocument 501 default
  ErrorDocument 502 default
  ErrorDocument 503 default

  # Logs
  ErrorLog /var/log/apache2/git_error_log
  CustomLog /var/log/apache2/git_access_log combined
  LogLevel warn

  DocumentRoot /srv/www/htdocs/cgit

  <Directory /srv/www/htdocs/cgit>

    SetEnv CGIT_CONFIG /var/lib/mygit/conf/public

    Addhandler cgi-script .cgi
    DirectoryIndex cgit.cgi
    Options +FollowSymLinks +ExecCGI
    AllowOverride None
    Order allow,deny
    allow from all

    RewriteEngine On
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule (.*) cgit.cgi/$1
    RewriteRule ^cgit.cgi$  cgit.cgi/
  </Directory>


</VirtualHost>
